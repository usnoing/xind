# 网络知识速记手册

## 📚 目录导航

- [基础层次模型](#基础层次模型)
  - [OSI 与 TCP/IP 模型对比](#osi-与-tcpip-模型对比)
  - [TCP/IP 四层详解](#tcpip-四层详解)
- [网络设备](#网络设备)
  - [工作层级对比](#工作层级对比)
  - [路由器 vs 交换机](#路由器-vs-交换机)
- [IPv4 地址](#ipv4-地址)
  - [地址分类](#地址分类)
  - [私网地址范围](#私网地址范围)
  - [子网计算](#子网计算)
- [传输层协议](#传输层协议)
  - [TCP vs UDP](#tcp-vs-udp)
- [多路复用技术](#多路复用技术)
- [交换机原理](#交换机原理)
  - [转发逻辑](#转发逻辑)
  - [域特性](#域特性)
- [路由与转发](#路由与转发)
  - [路由协议对比](#路由协议对比)
  - [路由汇聚](#路由汇聚route-summarization)
  - [路由算法设计原则](#路由算法设计原则)
- [NAT 地址转换](#nat-地址转换)
- [VLAN 虚拟局域网](#vlan-虚拟局域网)
  - [配置要素](#配置要素)
  - [核心优势](#核心优势)
- [IPv6 寻址](#ipv6-寻址)
  - [地址格式](#地址格式)
- [协议分层快查](#协议分层快查)
- [核心记忆口诀](#核心记忆口诀)
- [重点复习清单](#重点复习清单)

---

## 基础层次模型

### OSI 与 TCP/IP 模型对比

| OSI层次    | TCP/IP层次 | 传输单位       | 核心协议             |
| ---------- | ---------- | -------------- | -------------------- |
| 物理层     | 网络接口层 | 比特（Bit）    | -                    |
| 数据链路层 | 网络接口层 | 帧（Frame）    | Ethernet, PPP        |
| 网络层     | 网际层     | 分组（Packet） | IP, ICMP, ARP        |
| 传输层     | 传输层     | 段/报          | TCP, UDP             |
| 应用层\*   | 应用层     | 报文           | HTTP, FTP, DNS, SMTP |

\*会话层、表示层并入应用层

### TCP/IP 四层详解

| 层次       | 核心协议                   | 主要功能            |
| ---------- | -------------------------- | ------------------- |
| 应用层     | HTTP, FTP, DNS, SMTP, DHCP | 提供用户服务        |
| 传输层     | TCP, UDP                   | 端到端通信          |
| 网际层     | IP, ICMP, IGMP             | 路由寻址            |
| 网络接口层 | Ethernet, PPP, ARP         | 比特流传输、MAC编址 |

---

## 网络设备

### 工作层级对比

| 设备   | 工作层     | 功能         | 特点       |
| ------ | ---------- | ------------ | ---------- |
| 中继器 | 物理层     | 放大信号     | -          |
| 集线器 | 物理层     | 广播所有端口 | 共享带宽   |
| 交换机 | 数据链路层 | MAC转发      | 独立冲突域 |
| 路由器 | 网络层     | IP路由转发   | 基于路由表 |

### 路由器 vs 交换机

| 指标     | 路由器           | 交换机         |
| -------- | ---------------- | -------------- |
| 查表方式 | 路由表（基于IP） | MAC表          |
| 转发目标 | 网络层地址       | 数据链路层地址 |
| 核心功能 | 跨网络转发       | 同网络转发     |

---

## IPv4 地址

### 地址分类

| 分类 | 首位 | 范围    | 用途     |
| ---- | ---- | ------- | -------- |
| A类  | 0    | 1–126   | 大型网络 |
| B类  | 10   | 128–191 | 中型网络 |
| C类  | 110  | 192–223 | 小型网络 |
| D类  | 1110 | 224–239 | 组播     |

### 私网地址范围

| 分类 | 地址范围                    | 前缀 |
| ---- | --------------------------- | ---- |
| A类  | 10.0.0.0–10.255.255.255     | /8   |
| B类  | 172.16.0.0–172.31.255.255   | /12  |
| C类  | 192.168.0.0–192.168.255.255 | /16  |

### 子网计算

**公式**：可用主机数 = $2^{\text{主机位}} - 2$

| 分类 | 默认前缀 | 主机位 | 可用主机数 |
| ---- | -------- | ------ | ---------- |
| A类  | /8       | 24     | ~1677万    |
| B类  | /16      | 16     | 65534      |
| C类  | /24      | 8      | 254        |

---

## 传输层协议

### TCP vs UDP

| 特性        | TCP | UDP |
| ----------- | --- | --- |
| 源端口      | ✓   | ✓   |
| 目的端口    | ✓   | ✓   |
| 校验和      | ✓   | ✓   |
| 序号/确认号 | ✓   | -   |
| 标志位      | ✓   | -   |

---

## 多路复用技术

- **FDM** - 频分复用（带宽分割）
- **TDM** - 时分复用（时间分割时隙）
- **CDMA** - 码分复用（编码区分）
- **WDM** - 波分复用（光纤波长）

---

## 交换机原理

### 转发逻辑

| MAC查询结果  | 转发行为             |
| ------------ | -------------------- |
| 查到唯一匹配 | 转发至对应端口       |
| 查无匹配     | 泛洪（广播所有端口） |

### 域特性

- **冲突域**：每个端口独立
- **广播域**：整个交换机（无VLAN时）
- **能力**：支持多端口并发通信

---

## 路由与转发

### 路由协议对比

| 协议 | 类型     | 收敛速度 | 适用规模 |
| ---- | -------- | -------- | -------- |
| RIP  | 距离矢量 | 慢       | 小型网络 |
| OSPF | 链路状态 | 快       | 大型网络 |

### 路由汇聚（Route Summarization）

步骤：

1. IP地址转二进制
2. 找最长相同前缀
3. 转回十进制确定汇聚网段

例：`21.1.193.0/24` + `21.1.194.0/24` = `21.1.192.0/22`

### 路由算法设计原则

- **正确性** - 找到最优路径
- **稳定性** - 不频繁震荡
- **健壮性** - 容错能力强
- **简洁性** - 易于实现维护

---

## NAT 地址转换

| 类型    | 映射关系 | 场景         |
| ------- | -------- | ------------ |
| 静态NAT | 一对一   | 服务器固定IP |
| 动态NAT | 多对多   | 内网访问外网 |
| PAT     | 多对一   | 小型网络出口 |

---

## VLAN 虚拟局域网

### 配置要素

1. 端口归属
2. VLAN编号（ID）
3. 划分方式（端口/MAC/IP）
4. 跨VLAN通信需三层设备

### 核心优势

- **安全** - 隔离广播域
- **灵活** - 逻辑跨越物理位置
- **性能** - 减少广播风暴

---

## IPv6 寻址

### 地址格式

- **长度**：128位
- **分组**：8组16位十六进制，冒号分隔
- **压缩**：双冒号 `::` 替代连续零段，仅可用一次

✅ 正确：`2001:db8::1`  
❌ 错误：`2001::db8::1`

---

## 协议分层快查

| 协议                       | 层次       |
| -------------------------- | ---------- |
| IP                         | 网络层     |
| TCP, UDP                   | 传输层     |
| HTTP, FTP, DNS, SMTP, DHCP | 应用层     |
| Ethernet, PPP, ARP         | 网络接口层 |
| ICMP, IGMP                 | 网际层     |

---

## 核心记忆口诀

| 内容       | 口诀                                   |
| ---------- | -------------------------------------- |
| 模型分层   | 物比数帧网分包，传报段文应用交         |
| 设备选择   | 跨网选路由器，扩网选网桥，多机选集线器 |
| 主机数计算 | 主机位减2；前缀减32得主机位            |
| NAT类型    | 静态一对一，动态多对多，PAT靠端口      |
| 私网范围   | 10全、172(16-31)、192.168              |

---

## 重点复习清单

✓ 七层模型 vs 四层模型差异  
✓ 各层设备工作原理  
✓ IP地址子网计算  
✓ TCP/UDP特性对比  
✓ NAT原理与应用  
✓ VLAN配置与优势  
✓ 路由协议对比  
✓ 交换机转发逻辑
